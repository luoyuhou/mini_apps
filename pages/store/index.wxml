<!--pages/store/index.wxml-->
<view class="store--page">
    <!-- 顶部搜索栏 -->
    <view class="store--page-header">
        <view class="store--page-search-bar">
            <image class="search-icon" src="../../static/img/search.png" mode="aspectFit"></image>
            <input type="text" placeholder="搜索商家、商品" class="store--page-search" />
        </view>
        <view class="store--page-filter">
            <view class="filter-item {{filterType === 'default' ? 'active' : ''}}" bindtap="onFilter" data-type="default">
                <text>综合排序</text>
            </view>
            <view class="filter-item {{filterType === 'sales' ? 'active' : ''}}" bindtap="onFilter" data-type="sales">
                <text>销量</text>
            </view>
            <view class="filter-item {{filterType === 'distance' ? 'active' : ''}}" bindtap="onFilter" data-type="distance">
                <text>距离</text>
            </view>
            <view class="filter-item {{filterType === 'price' ? 'active' : ''}}" bindtap="onFilter" data-type="price">
                <text>价格</text>
            </view>
        </view>
    </view>

    <!-- 商家列表 -->
    <scroll-view scroll-y class="store--page-list">
        <view class="store--page-store-item" wx:for="{{stores}}" wx:key="id" bindtap="onStoreClick" data-id="{{item.id}}">
            <image class="store-image" src="{{item.image_url || '../../static/img/store_brief.png'}}" mode="aspectFill"></image>
            <view class="store-info">
                <view class="store-name-row">
                    <text class="store-name">{{item.store_name}}</text>
                    <view class="store-tags" wx:if="{{item.tags}}">
                        <text class="tag" wx:for="{{item.tags}}" wx:key="index" wx:for-item="tag">{{tag}}</text>
                    </view>
                </view>
                <view class="store-rating-row">
                    <view class="rating-wrap">
                        <image src="../../static/img/star.png" class="star-icon"></image>
                        <text class="rating-score">{{item.rating || '4.8'}}</text>
                    </view>
                    <text class="sales-count">月售{{item.month_count || 100}}+</text>
                </view>
                <view class="store-delivery-row">
                    <text class="delivery-info">¥{{item.mini_total || 20}}起送</text>
                    <text class="delivery-fee">配送费¥{{item.shipping_fee || 5}}</text>
                    <text class="delivery-time">{{item.delivery_time || '30'}}分钟</text>
                </view>
                <view class="store-discount-row" wx:if="{{item.discount}}">
                    <view class="discount-tag">
                        <text>{{item.discount}}</text>
                    </view>
                </view>
            </view>
        </view>
        <view class="no-more" wx:if="{{stores.length > 0}}">没有更多了</view>
        <view class="empty" wx:if="{{stores.length === 0}}">
            <text>暂无商家</text>
        </view>
    </scroll-view>
</view>
